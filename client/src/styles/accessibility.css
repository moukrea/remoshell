/**
 * Accessibility styles for WCAG 2.1 AA compliance
 */

/* ==========================================================================
   Skip Links
   ========================================================================== */

.skip-links {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 9999;
}

.skip-link {
  position: absolute;
  top: -100%;
  left: 0;
  padding: 0.75rem 1rem;
  background-color: #1a365d;
  color: #ffffff;
  text-decoration: none;
  font-weight: 600;
  border-radius: 0 0 0.375rem 0;
  transition: top 0.15s ease-in-out;
}

.skip-link:focus {
  top: 0;
  outline: 2px solid #90cdf4;
  outline-offset: 2px;
}

/* ==========================================================================
   Focus Indicators
   ========================================================================== */

/* Default focus ring for all focusable elements */
:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

/* Remove default outline when using focus-visible */
:focus:not(:focus-visible) {
  outline: none;
}

/* Enhanced focus for buttons */
button:focus-visible,
[role="button"]:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3);
}

/* Enhanced focus for links */
a:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
  border-radius: 2px;
}

/* Enhanced focus for inputs */
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 0;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

/* ==========================================================================
   Screen Reader Only
   ========================================================================== */

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sr-only-focusable:focus,
.sr-only-focusable:active {
  position: static;
  width: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* ==========================================================================
   High Contrast Mode
   ========================================================================== */

@media (prefers-contrast: more) {
  :root {
    --color-primary: #0000ff;
    --color-secondary: #ffff00;
    --color-background: #000000;
    --color-foreground: #ffffff;
    --color-border: #ffffff;
  }

  body {
    background-color: #000000;
    color: #ffffff;
  }

  a {
    color: #ffff00;
    text-decoration: underline;
  }

  button,
  [role="button"] {
    border: 2px solid #ffffff;
    background-color: #000000;
    color: #ffffff;
  }

  button:hover,
  [role="button"]:hover {
    background-color: #ffffff;
    color: #000000;
  }

  :focus-visible {
    outline: 3px solid #00ffff;
    outline-offset: 2px;
  }

  input,
  select,
  textarea {
    border: 2px solid #ffffff;
    background-color: #000000;
    color: #ffffff;
  }
}

/* ==========================================================================
   Reduced Motion
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ==========================================================================
   Color Contrast (WCAG AA compliant colors)
   ========================================================================== */

/* Text colors that meet 4.5:1 contrast ratio on white/light backgrounds */
.text-accessible-dark {
  color: #1a1a1a; /* 16.1:1 on white */
}

.text-accessible-muted {
  color: #595959; /* 7.0:1 on white */
}

/* Text colors that meet 4.5:1 contrast ratio on dark backgrounds */
.text-accessible-light {
  color: #ffffff; /* Full white */
}

.text-accessible-light-muted {
  color: #b3b3b3; /* 4.5:1 on #1a1a1a */
}

/* Link colors with sufficient contrast */
.link-accessible {
  color: #0052cc; /* 6.7:1 on white */
}

.link-accessible:hover {
  color: #003d99; /* 9.0:1 on white */
}

/* Dark theme links */
.link-accessible-dark {
  color: #4da6ff; /* 4.5:1 on #1a1a1a */
}

.link-accessible-dark:hover {
  color: #80bfff; /* 6.0:1 on #1a1a1a */
}

/* ==========================================================================
   Touch Target Size (minimum 44x44px)
   ========================================================================== */

.touch-target {
  min-width: 44px;
  min-height: 44px;
}

/* Clickable elements with proper spacing */
.clickable-area {
  position: relative;
}

.clickable-area::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: max(100%, 44px);
  height: max(100%, 44px);
  transform: translate(-50%, -50%);
}

/* ==========================================================================
   Interactive Elements
   ========================================================================== */

/* Ensure interactive elements are visually distinct */
[tabindex]:not([tabindex="-1"]) {
  cursor: pointer;
}

/* Indicate disabled state */
[disabled],
[aria-disabled="true"] {
  opacity: 0.6;
  cursor: not-allowed;
}

/* ==========================================================================
   ARIA Live Regions
   ========================================================================== */

.aria-live-assertive {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  border: 0;
}

/* Toast/Notification container styles */
[role="alert"] {
  /* Ensure alerts are visible and accessible */
}

[aria-live="polite"],
[aria-live="assertive"] {
  /* Ensure live regions work correctly */
}

/* ==========================================================================
   Component-specific Accessibility Styles
   ========================================================================== */

/* Sidebar navigation */
.sidebar__nav-item:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: -2px;
  background-color: rgba(59, 130, 246, 0.1);
}

.sidebar__nav-item[aria-current="page"] {
  font-weight: 600;
}

/* File browser rows */
.file-entry:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: -2px;
  background-color: rgba(59, 130, 246, 0.1);
}

.file-entry[aria-selected="true"] {
  background-color: rgba(59, 130, 246, 0.2);
}

/* Device list items */
.device-list-item:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: -2px;
  background-color: rgba(59, 130, 246, 0.1);
}

/* Pairing code input segments */
.pairing-code-input__segment:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
}

/* Terminal container */
[role="application"][aria-label="Terminal"] {
  /* Terminal specific styles */
}

/* ==========================================================================
   Keyboard Navigation Indicators
   ========================================================================== */

/* Show keyboard focus indicator when navigating with keyboard */
body.keyboard-nav *:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

/* Hide focus ring when using mouse */
body:not(.keyboard-nav) *:focus:not(:focus-visible) {
  outline: none;
}
